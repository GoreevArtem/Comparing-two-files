# Comparing-two-files
Работа на фрилансе. Заказчик требовал сравнить 2 файла csv (с возможностью подключения к бд) и excel

## ТЗ:

два файла:

1) Проверка (1).xlsx - Это изменяем файл, куда мы будем добавлять разные компании, чтобы их проверить на наличие в нашей базе по разным полям

2) база(2).csv - это выгрузка из бд (далее будет заменена в коде на подключение к бд и создание dataframe, в котором и будем искать совпадение

Нам требуется собрать инструмент, который будет находить совпадения и по совпадающим строчкам добавлять данные

Какие столбцы с какими соотносим:

1) Название организации (Проверка (1)) - CompanyName (база (2))

 Те мы из файла 1 берем компанию, к примеру 1 строчку, и пробегаем циклом по всему столбцу CompanyName для поиска совпадений. Если находим к примеру совпадение в 18434 строке, то тогда забираем данные из этой строчки

Какие данные забираем:

idLead

Lead_DateChange

Lead_DateCall

idOpportunity

Opportunity_DateChange

Opportunity_DateCall

gm_name2

gm_name

Но! тут есть одно уточнение в названиях у компаний в файле Проверка (1) могу быть названия с ООО ОАО ЗАО ПАО АО через запятую или в кавычках, запятая может быть перед или после. Нам важно искать название у такой строчки и с этой припиской и без нее, так как в базе может быть записано с ней или без нее

Надеюсь доступно объяснил, если будут вопросы задавай

2) Веб-сайт (Проверка (1)) - WebSiteUrl (база (2))

Те мы из файла 1 берем сайт, к примеру 1 строчку, и пробегаем циклом по всему столбцу WebSiteUrl для поиска совпадений. Если находим к примеру совпадение в 18434 строке, то тогда забираем данные из этой строчки

Какие данные забираем:

idLead

Lead_DateChange

Lead_DateCall

idOpportunity

Opportunity_DateChange

Opportunity_DateCall

gm_name2

gm_name

Все аналогично первому пункту. Только тут опять в сайтах может быть добавка https или //,те 100% совпадения может не быть, но сайт одинаковый, может тут как-то регулярным выражением искать

3) Общий телефон (Проверка (1)) - Telephone1 и Telephone3 (база (2))

Ищем совпадения аналогично 1 и 2 пункту, все тоже самое, только тут мы уже ищем совпадения в ДВУХ столбцах!

Но, еще в столбце Общий телефон могут быть номера указаны через запятую. Те если в строке несколько телефонов через запятую, то нужно их все поискать в этих двух столбца

Соответсвенно если находим значения, то тоже добавляем данные

4) Email (Проверка (1)) - EMailAddress1 (база (2))

тут все аналогично. Я думаю что адреса должны иметь 100 % соотношение поэтому тут ничего предобрабатывать не надо

Заключительно. Логика такая, если мы находим хоть одно совпадение в строке с базой не важно в каком столбце, то мы сразу добавляем данные из бд по этим столбца в файл с проверкой:

idLead

Lead_DateChange

Lead_DateCall

idOpportunity

Opportunity_DateChange

Opportunity_DateCall

gm_name2

gm_name

Вот часть кода, которая была реализована раньше

Тут логика такая же, только это было сделано немного для другого файла

Возможно вам поможет в реализации логики именно по функции проверки и добавления данных из этого индекса
